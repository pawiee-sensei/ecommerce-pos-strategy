<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title><%= title || "Admin Panel" %></title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root {
      --bg: #f4f6f9;
      --sidebar-bg: #ffffff;
      --text: #1f2937;
      --muted: #6b7280;
      --accent: #2563eb;
      --radius: 10px;
      --shadow: 0 4px 14px rgba(0,0,0,0.06);
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: Inter, Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      display: flex;
      height: 100vh;
      overflow: hidden;
    }

    /* SIDEBAR */
    .sidebar {
      width: 240px;
      background: var(--sidebar-bg);
      box-shadow: var(--shadow);
      display: flex;
      flex-direction: column;
      transition: width .25s ease;
    }
    .sidebar.collapsed { width: 70px; }

    .sidebar-header {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 16px 20px;
      border-bottom: 1px solid #e5e7eb;
    }

    #menu-btn {
      background: none;
      border: none;
      cursor: pointer;
      padding: 6px;
      border-radius: 8px;
    }

    #menu-btn:hover { background: #f1f5f9; }

    #menu-btn svg {
      width: 26px;
      height: 26px;
      stroke: #4b5563;
      stroke-width: 1.5;
    }

    .brand-title { font-size: 18px; font-weight: 600; }
    .sidebar.collapsed .brand-title { display: none; }

    /* NAVIGATION */
    .nav {
      margin-top: 10px;
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .nav a {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 12px 20px;
      color: var(--text);
      text-decoration: none;
      font-size: 15px;
      border-radius: var(--radius);
      transition: background .2s;
    }
    .nav a:hover { background: #f1f5f9; }

    .nav svg {
      width: 20px;
      height: 20px;
      stroke: #6b7280;
      stroke-width: 1.5;      /* ░ SUPER MINIMAL THIN LINE ░ */
      stroke-linecap: round;
      stroke-linejoin: round;
      flex-shrink: 0;
    }

    .sidebar.collapsed a span { display: none; }

    /* TOPBAR */
    .topbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 16px 20px;
      background: white;
      box-shadow: var(--shadow);
      height: 60px;
    }

    /* MAIN CONTENT */
    .main {
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    #panel-container {
      flex-grow: 1;
      overflow-y: auto;
      padding: 20px;
    }
  </style>
</head>
<body>

  <!-- SIDEBAR -->
  <aside class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <button id="menu-btn">
        <!-- Minimal Hamburger -->
        <svg fill="none">
          <path d="M4 7h16" />
          <path d="M4 12h16" />
          <path d="M4 17h16" />
        </svg>
      </button>

      <span class="brand-title">E-Commerce</span>
    </div>

    <nav class="nav">

      <!-- DASHBOARD — minimal grid -->
      <a href="#" data-panel="dashboard">
        <svg fill="none">
          <rect x="4" y="4" width="6" height="6" rx="1" />
          <rect x="14" y="4" width="6" height="6" rx="1" />
          <rect x="4" y="14" width="6" height="6" rx="1" />
          <rect x="14" y="14" width="6" height="6" rx="1" />
        </svg>
        <span>Dashboard</span>
      </a>

      <!-- PRODUCTS — minimal box outline -->
      <a href="#" data-panel="products">
        <svg fill="none">
          <rect x="3.5" y="5" width="17" height="14" rx="2" />
          <path d="M3.5 10h17" />
        </svg>
        <span>Products</span>
      </a>

      <!-- POS — minimal cart outline -->
      <a href="#" data-panel="pos">
        <svg fill="none">
          <circle cx="8" cy="17" r="1.7" />
          <circle cx="16" cy="17" r="1.7" />
          <path d="M3 5h2l2 8h10l2-6H7" />
        </svg>
        <span>POS</span>
      </a>

      <!-- STRATEGY — clean arrow rise -->
      <a href="#" data-panel="strategy">
        <svg fill="none">
          <path d="M4 18h16" />
          <path d="M4 12l6-4 4 3 6-7" />
        </svg>
        <span>Strategy</span>
      </a>

    </nav>

    <div style="padding:16px;">
      <form method="POST" action="/logout">
        <button style="
          width:100%;
          padding:10px;
          border:none;
          border-radius:8px;
          background:#e11d48;
          color:white;
          cursor:pointer;">
          Logout
        </button>
      </form>
    </div>
  </aside>

  <!-- MAIN AREA -->
  <div class="main">
    <div class="topbar">
      <div></div>
      <div>
        <span style="font-size:14px; color:var(--muted);">
          Logged in as <strong><%= user.username %></strong>
        </span>
      </div>
    </div>

    <div id="panel-container">
      <div style="padding:20px; color:var(--muted);">
        Select a panel from the sidebar.
      </div>
    </div>
  </div>

  <script>
    // Sidebar Toggle
    document.getElementById("menu-btn").onclick = () => {
      document.getElementById("sidebar").classList.toggle("collapsed");
    };

    // Dynamic Panel Loading
    document.querySelectorAll(".nav a").forEach(el => {
      el.addEventListener("click", async (e) => {
        e.preventDefault();
        const panel = el.getAttribute("data-panel");
        
        const res = await fetch(`/admin/panels/${panel}`);
        const html = await res.text();
        
        document.getElementById("panel-container").innerHTML = html;
      });
    });
  </script>

</body>
</html>
